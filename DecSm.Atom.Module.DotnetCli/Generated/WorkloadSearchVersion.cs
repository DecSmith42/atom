// <auto-generated/>

#nullable enable

using DecSm.Atom.Paths;
using DecSm.Atom.Process;
using JetBrains.Annotations;

namespace DecSm.Atom.Module.DotnetCli;

public partial interface IDotnetCli
{
    /// <summary>
    ///     'dotnet workload search version' has three functions depending on its argument:
    ///           1. If no argument is specified, it outputs a list of the latest released workload versions from this feature band. Takes the --take option to specify how many to provide and --format to alter the format.
    ///              Example:
    ///                dotnet workload search version --take 2 --format json
    ///                [{"workloadVersion":"9.0.201"},{"workloadVersion":"9.0.200.1"}]
    ///           2. If a workload version is provided as an argument, it outputs a table of various workloads and their versions for the specified workload version. Takes the --format option to alter the output format.
    ///              Example:
    ///                dotnet workload search version 9.0.201
    ///                Workload manifest ID                               Manifest feature band      Manifest Version
    ///                ------------------------------------------------------------------------------------------------
    ///                microsoft.net.workload.emscripten.current          9.0.100-rc.1               9.0.0-rc.1.24430.3
    ///                microsoft.net.workload.emscripten.net6             9.0.100-rc.1               9.0.0-rc.1.24430.3
    ///                microsoft.net.workload.emscripten.net7             9.0.100-rc.1               9.0.0-rc.1.24430.3
    ///                microsoft.net.workload.emscripten.net8             9.0.100-rc.1               9.0.0-rc.1.24430.3
    ///                microsoft.net.sdk.android                          9.0.100-rc.1               35.0.0-rc.1.80
    ///                microsoft.net.sdk.ios                              9.0.100-rc.1               17.5.9270-net9-rc1
    ///                microsoft.net.sdk.maccatalyst                      9.0.100-rc.1               17.5.9270-net9-rc1
    ///                microsoft.net.sdk.macos                            9.0.100-rc.1               14.5.9270-net9-rc1
    ///                microsoft.net.sdk.maui                             9.0.100-rc.1               9.0.0-rc.1.24453.9
    ///                microsoft.net.sdk.tvos                             9.0.100-rc.1               17.5.9270-net9-rc1
    ///                microsoft.net.workload.mono.toolchain.current      9.0.100-rc.1               9.0.0-rc.1.24431.7
    ///                microsoft.net.workload.mono.toolchain.net6         9.0.100-rc.1               9.0.0-rc.1.24431.7
    ///                microsoft.net.workload.mono.toolchain.net7         9.0.100-rc.1               9.0.0-rc.1.24431.7
    ///                microsoft.net.workload.mono.toolchain.net8         9.0.100-rc.1               9.0.0-rc.1.24431.7
    ///           3. If one or more workloads are provided along with their versions (by joining them with the '@' character), it outputs workload versions that match the provided versions. Takes the --take option to specify how many to provide and --format to alter the format.
    ///              Example:
    ///                dotnet workload search version maui@9.0.0-rc.1.24453.9 ios@17.5.9270-net9-rc1
    ///                9.0.201
    ///         
    /// </summary>
    /// <param name="workloadVersion">
    ///     Output workload manifest versions associated with the provided workload version.
    /// </param>
    /// <param name="options">
    ///     Options
    /// </param>
    /// <param name="cancellationToken">
    ///     Cancellation token
    /// </param>
    public Task<ProcessRunResult> WorkloadSearchVersion(
        System.String workloadVersion,
        WorkloadSearchVersionOptions? options = null,
        CancellationToken cancellationToken = default
    );
    
}

internal partial class DotnetCli : IDotnetCli
{
    public Task<ProcessRunResult> WorkloadSearchVersion(
        System.String workloadVersion,
        WorkloadSearchVersionOptions? options = null,
        CancellationToken cancellationToken = default
    ) =>
        processRunner.RunAsync(new("dotnet",
            string.Join(' ', [
                "workload search version",
                workloadVersion,
                options?.ToString(),
            ])), cancellationToken);
    
}

[PublicAPI]
public sealed record WorkloadSearchVersionOptions
{
    /// <summary>
    ///     Changes the format of outputted workload versions. Can take 'json' or 'list'
    /// </summary>
    public System.String? Format
    {
        get;
        init;
    }
    
    public System.Boolean? IncludePreviews
    {
        get;
        init;
    }
    
    public System.Int32? Take
    {
        get;
        init;
    }
    
    public override string ToString()    {
        return string.Join(' ',
        new[]
        {
            Format is not null
                ? $"--format {Format}"
                : null,
            IncludePreviews is true
                ? "--include-previews"
                : null,
            Take is not null
                ? $"--take {Take}"
                : null,
        }
        );
    }
    
}

